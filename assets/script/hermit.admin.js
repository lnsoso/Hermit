jQuery(document).ready(function(a){var f=["songlist","album"],c=function(){a("#gohermit, #wp-content-media-buttons").removeClass("selected");a("#hermit-box").remove()};a("#gohermit").click(function(){0<a("#hermit-box").length?(a(this).add("#wp-content-media-buttons").removeClass("selected"),a("#hermit-box").remove()):(0<a(".wp-editor-tabs").length&&a("#wp-content-media-buttons").addClass("selected"),a(this).addClass("selected"),a(0<a(".wp-editor-tabs").length?"#wp-content-media-buttons":"#wp-content-editor-tools").after('<div id="hermit-box" class="postbox"><div id="hermit-content"><div id="hermit-tab"><ul id="hermit-tabul"><li class="hermit-tabli current">\u5355\u66f2</li><li class="hermit-tabli">\u4e13\u8f91</li></ul></div><div id="hermit-body"><ul id="hermit-bodyul"><li class="hermit-bodyli current"><textarea id="hermit-song" placeholder="\u8f93\u5165\u867e\u7c73\u6b4c\u66f2\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u8bf7\u56de\u8f66\u6362\u884c"></textarea></li><li class="hermit-bodyli"><input type="text" id="hermit-album" placeholder="\u8f93\u5165\u867e\u7c73\u4e13\u8f91\u5730\u5740" /></li></ul></div></div><div id="hermit-action" class="clear"><a id="hermit-delete" class="submitdelete deletion" href="javascript:;">\u53d6\u6d88</a><div id="hermit-publish" class="button button-primary">\u6dfb\u52a0\u5230\u6587\u7ae0\u4e2d</div></div></div>'))});
a("#wp-content-wrap").on("click","#hermit-delete",function(){c()});a("#wp-content-wrap").on("click",".hermit-tabli",function(){if(!a(this).hasClass("current")){var b=a(".hermit-tabli").index(a(this));a(".hermit-tabli, .hermit-bodyli").removeClass("current");a(".hermit-tabli:eq("+b+"), .hermit-bodyli:eq("+b+")").addClass("current")}return!1});a("#wp-content-wrap").on("click","#hermit-publish",function(){var b=a(".hermit-tabli").index(a(".hermit-tabli.current"));switch(f[b]){case "songlist":var b=a("#hermit-song").val(),
d=[],e=/http:\/\/www.xiami.com\/song\/(\d+).*?/,b=b.split(/\r?\n/g),b=a.grep(b,function(a){return e.test(a)?!0:!1});a.each(b,function(a,b){d.push(b.match(e)[1])});b="[hermit]songlist#:"+d.join(",")+"[/hermit]";send_to_editor(b);c();break;case "album":b=a("#hermit-album").val(),b=b.match(/http:\/\/www.xiami.com\/album\/(\d+).*?/)[1],send_to_editor("[hermit]album#:"+b+"[/hermit]"),c()}})});